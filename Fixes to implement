I see the issue. Looking more closely at your switchTab() method, I notice there's a problem with how it handles the display of tab panels. The method uses both classList.toggle('active') and also sets display style properties, which might be conflicting.

Here's the corrected switchTab() method that should work properly:

```javascript
// Switch between tabs
switchTab(tabName) {
    // Tab navigation
    document.querySelectorAll('.tab-btn').forEach(btn => {
        const isActive = btn.dataset.tab === tabName;
        btn.classList.toggle('active', isActive);
        btn.setAttribute('aria-selected', isActive);
    });

    // Tab panels - CRITICAL FIX: Use display property instead of just classes
    document.querySelectorAll('.tab-panel').forEach(panel => {
        const isActive = panel.id === `${tabName}-panel`;
        
        if (isActive) {
            panel.classList.add('active');
            panel.style.display = 'block';
            panel.setAttribute('tabindex', '0');
        } else {
            panel.classList.remove('active');
            panel.style.display = 'none';
            panel.setAttribute('tabindex', '-1');
        }
    });

    // Hide export download and progress
    const exportDownload = document.getElementById('export-download');
    const pdfProgress = document.getElementById('pdf-progress');
    
    if (exportDownload) exportDownload.style.display = 'none';
    if (pdfProgress) pdfProgress.style.display = 'none';
    
    // Hide previews when switching away from export
    if (tabName !== 'export') {
        this.hideCSVPreview();
        this.hideJSONPreview();
    }
    
    // Render logbook if switching to that tab
    if (tabName === 'logbook') {
        this.renderLogbook();
    }
    
    // Scroll to top on mobile
    if (window.innerWidth < 768) {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }
    
    // Focus the active tab panel for accessibility
    const tabPanel = document.getElementById(`${tabName}-panel`);
    if (tabPanel) {
        setTimeout(() => {
            tabPanel.focus();
        }, 100);
    }
}
```

And here's an alternative approach if the above doesn't work. Update your editObservation() method to include a small delay and ensure the tab switch happens:

```javascript
// Edit an observation
editObservation(id) {
    const observation = this.observations.find(obs => obs.id === id);
    if (!observation) return;

    const dateTime = new Date(observation.timestamp);
    const dateStr = dateTime.toISOString().split('T')[0];
    const timeStr = dateTime.toTimeString().slice(0, 5);

    // ... (all your existing form population code remains the same) ...
    
    // FIXED: Use switchTab with a small delay to ensure DOM updates
    setTimeout(() => {
        this.switchTab('record');
    }, 50);
    
    // Add a visual indicator that we're editing
    const header = document.querySelector('.header');
    if (header) {
        header.style.boxShadow = '0 4px 20px rgba(46, 139, 87, 0.3)';
        header.style.borderBottom = '3px solid #2e8b57';
        
        // Remove the effect after 3 seconds
        setTimeout(() => {
            if (header) {
                header.style.boxShadow = '';
                header.style.borderBottom = '';
            }
        }, 3000);
    }
    
    // Focus on the first field - with a longer delay to ensure tab switch is complete
    setTimeout(() => {
        const observerNameInput = document.getElementById('observer-name');
        if (observerNameInput) {
            observerNameInput.focus();
            observerNameInput.select();
        }
        
        // Scroll to top on mobile
        if (window.innerWidth < 768) {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    }, 150);
    
    // Show a clear message
    this.showStatus(`✏️ Editing observation: ${id}`, 'info');
}
```

If neither of these work, there might be a CSS issue. Let's check if your CSS properly shows/hides the tab panels. Add this debug function to check the tab states:

```javascript
// Add this debug method to EcoLens object
debugTabState() {
    console.log('Current tab state:');
    document.querySelectorAll('.tab-panel').forEach(panel => {
        console.log(`Panel ${panel.id}:`, {
            hasActiveClass: panel.classList.contains('active'),
            displayStyle: panel.style.display,
            computedDisplay: window.getComputedStyle(panel).display,
            isVisible: panel.offsetParent !== null
        });
    });
    
    document.querySelectorAll('.tab-btn').forEach(btn => {
        console.log(`Button ${btn.dataset.tab}:`, {
            hasActiveClass: btn.classList.contains('active'),
            ariaSelected: btn.getAttribute('aria-selected')
        });
    });
}

// Then call it in editObservation after switchTab:
editObservation(id) {
    // ... existing code ...
    
    setTimeout(() => {
        this.switchTab('record');
        this.debugTabState(); // Debug output
    }, 50);
    
    // ... rest of code ...
}
```

Also, check if your CSS has any !important rules that might be overriding the JavaScript. Your CSS should look something like this:

```css
/* Tab panels should be hidden by default */
.tab-panel {
    display: none;
    opacity: 0;
    transition: opacity 0.3s ease;
}

/* Active tab panel should be visible */
.tab-panel.active {
    display: block !important; /* Important to override inline styles if needed */
    opacity: 1;
}

/* Tab buttons */
.tab-btn {
    /* Your button styles */
}

.tab-btn.active {
    background-color: var(--primary-color);
    color: white;
}
```

The key issue is likely that your switchTab() method needs to both add/remove the active class AND set the display property, since CSS might be using both.
